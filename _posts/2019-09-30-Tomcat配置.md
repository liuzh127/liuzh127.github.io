---
layout: post
title: Tomcat优化
categories: [Tomcat]
tags: [Tomcat]
---
#### 1. 按照日期切割catalina.out日志  
修改在tomcat/bin下的catalina.sh文件  
找到**CATALINA_OUT="$CATALINA_BASE"/logs/catalina.out**    
修改为**CATALINA_OUT="$CATALINA_BASE"/logs/catalina"-`date "+%Y-%m-%d"`".out**  
重新启动tomcat  
#### 2. shutdown.sh没有关闭tomcat进程  
修改tomcat下bin/catalina.sh文件，在最后添加以下内容:  
#设置记录CATALINA_PID   
#该设置会在启动时候bin下新建一个CATALINA_PID文件   
#关闭时候从CATALINA_PID文件找到pid，kill同时删除CATALINA_PID文件  
**if [ -z "$CATALINA_PID" ]; then**    
      **CATALINA_PID=$PRGDIR/CATALINA_PID**    
**fi**  
tomcat的shutdown.sh文件,在最后一行加上-force:  
**exec "$PRGDIR"/"$EXECUTABLE" stop -force "$@"**  
#### 3. 默认端口功能  
8005端口为远程服务启停端口  
8080端口为HTTP端口  
8443端口为HTTPS端口  
8009端口为AJP端口，APACHE能过AJP协议访问TOMCAT的8009端口  

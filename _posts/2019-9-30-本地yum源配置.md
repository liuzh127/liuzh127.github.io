---
layout: post
title: 本地yum源配置
categories: [Linux]
tags: [yum源]
---
#### 1.	挂载安装文件ISO里面的yum源  
##### 1.1 上传ISO文件  
上传系统镜像文件rhel-server-6.9-x86_64-dvd.iso到目录/media  
##### 1.2 设置挂载  
[root@localhost ~]# mkdir /media/cdrom                                             
#新建镜像文件挂载目录  
[root@localhost ~]# cd /media                                                 
#进入系统镜像文件存放目录  
[root@localhost src]# ls                                    
#列出目录文件，可以看到刚刚上传的系统镜像文件  
[root@localhost ~]# mount -o loop /media/cdrom/rhel-server-6.9-x86_64-dvd.iso /media/cdrom    
#挂载系统镜像  
[root@localhost ~]# cd /media/cdrom                   
#进入挂载目录，使用ls命令可以看到已经有文件存在了  
##### 1.3 设置开机自启动  
[root@localhost ~]# vim /etc/rc.d/rc.local                                    
#添加以下代码,实现开机自动挂载  
mount -o loop /opt/rhel-server-6.9-x86_64-dvd.iso /media/cdrom   
##### 1.4 配置本地yum源  
[root@localhost ~]# cd /etc/yum.repos.d/                                               
#进入yum配置目录  
[root@localhost yum.repos.d]# touch rhel-media.repo                                     
#建立yum配置文件  
[root@localhost yum.repos.d]# vim rhel-media.repo                             
#编辑配置文件，添加以下内容  
**[rhel-media]**  
**name=RedHat**   
**baseurl=file:///media/cdrom**     
**enabled=1**   
**gpgcheck=1**   
**gpgkey=file:///media/cdrom/RPM-GPG-KEY-redhat-release**    
##### 1.5 测试yum是否正常   
[root@localhost ~]# yum clean all                                                          
#清除yum缓存  
[root@localhost ~]# yum makecache                                       
#缓存本地yum源中的软件包信息  
[root@localhost ~]# yum repolist                                           
#显示本地yum源中的软件包信息  
**挂载之后可能还是无法使用，进入/etc/yum.repos.d/ 将Centos.Base.repo重命名使其失效即可**  
**yum安装时出现类似“warning: rpmts_HdrFromFdno: Header V3 RSA/SHA256 Signature, key ID fd431d51: NOKEY”的报错，是导入了旧的KEY文件，执行`rpm --import /etc/pki/rpm-gpg/RPM*`导入新KEY即可**  
#### 2. 关闭iptables和selinux  
临时关闭iptables：**service iptables stop**   
永久关闭iptables：**chkconfig iptables off**   
关闭selinux：vi /etc/sysconfig/selinux   
将SELINUX修改为disabled，即**SELINUX=disabled**   
#### 3. 更改主机名和配置域名解析  
##### 3.1 更改主机名  
查看Linux的主机名：  
[root@localhost ~]# hostname   
*localhost.localdomain*  
更改/etc/sysconfig下的network文件：  
[root@localhost ~]# vi /etc/sysconfig/network                   
#将HOSTNAME后面的值改为想要设置的主机名  
更改/etc下的hosts文件：  
[root@localhost ~]# vi /etc/hosts                              
#将localhost.localdomain改为想要设置的主机名  
##### 3.2 设置本地域名解析  
在/etc/hosts文件中添加：  
[root@localhost ~]# vi /etc/hosts   
192.168.0.1  AcroUC-node1.hbfec.com.cn                           
#一行一条记录，第一部分是IP，第二部分是域名，一个IP可以对应多个域名，一个域名不能对应多个IP，如果出现相同的域名，会按最前面的记录来解析  
重新启动服务器：  
[root@localhost ~]# reboot   